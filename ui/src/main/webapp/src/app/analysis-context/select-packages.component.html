<div>
    <div class="row row-cards-pf">
        <div class="col-md-5 col-lg-5 col-sm-12">
            <div class="card-pf">
                <div class="card-pf-heading" style="padding-left: 40px;">
                    <h2 class="card-pf-title" style="margin: 15px 0;">
                        <mat-checkbox class="example-margin"
                                      [(ngModel)]="checkedAll"
                                      (ngModelChange)="onCheckedAllChange($event)">
                        </mat-checkbox>
                        Packages
                    </h2>
                </div>

                <div *ngIf="loading">
                    <div class="card-pf-body" style="height: 183px;">
                        <div class="spinner" style="margin-top: 50px;"></div>
                    </div>
                </div>
                <div *ngIf="!loading">
                    <div class="card-pf-body pre-scrollable" *ngIf="dataSource?.data?.length > 0; else emptyPackages" style="height: 183px;">
                        <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" [trackBy]="trackByFn">
                            <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding>
                                <button type="button" mat-icon-button disabled></button>
                                <mat-checkbox class="checklist-leaf-node"
                                              [checked]="checklistSelection.isSelected(node)"
                                              (change)="leafItemSelectionToggle(node)">
                                    <i [class]="node.icon"></i> {{node.name}}
                                </mat-checkbox>
                            </mat-tree-node>
                            <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding>
                                <button type="button" mat-icon-button matTreeNodeToggle [attr.aria-label]="'toggle ' + node.fullName">
                                    <mat-icon class="mat-icon-rtl-mirror">
                                        {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                                    </mat-icon>
                                </button>
                                <mat-checkbox [checked]="descendantsAllSelected(node)"
                                              [indeterminate]="descendantsPartiallySelected(node)"
                                              (change)="itemSelectionToggle(node)">
                                    <i [class]="node.icon"></i> {{node.name}}
                                </mat-checkbox>
                            </mat-tree-node>
                        </mat-tree>
                    </div>
                    <ng-template #emptyPackages>
                        <div class="card-pf-body" style="height: 183px; padding-top: 0;">
                            <div class="blank-slate-pf" style="background-color: transparent; border: transparent; padding: 35px 60px;">
                                <div class="blank-slate-pf-icon">
                                    <span class="pficon pficon pficon-info"></span>
                                </div>
                                <h1>
                                    No packages found
                                </h1>
                            </div>
                        </div>
                    </ng-template>
                </div>

                <div class="card-pf-footer" style="padding: 15px 30px 10px;">
                    <p>
                        <a *ngIf="viewThirdPackages" (click)="viewHide3dPackagesEvent()" href="javascript:void();" class="card-pf-link-with-icon">
                            <span class="fa fa-minus"></span>Hide 3rd Party Packages
                        </a>
                        <a *ngIf="!viewThirdPackages" (click)="viewHide3dPackagesEvent()" href="javascript:void();" class="card-pf-link-with-icon">
                            <span class="fa fa-plus"></span>View 3rd Party Packages
                        </a>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-md-7 col-lg-7 col-sm-12">
            <div class="card-pf">
                <div class="card-pf-heading toolbar-pf">
                    <div class="dropdown card-pf-time-frame-filter">
                        <div class="form-group toolbar-pf-view-selector">
                            <button type="button"
                                    (click)="excludePackageViewSelection=0"
                                    [ngClass]="{'active': excludePackageViewSelection == 0}"
                                    class="btn btn-link">
                                <i class="fa fa-list"></i>
                            </button>
                            <button type="button"
                                    (click)="excludePackageViewSelection=1"
                                    [ngClass]="{'active': excludePackageViewSelection == 1}"
                                    class="btn btn-link">
                                <i class="pficon pficon-repository"></i>
                            </button>
                        </div>
                    </div>
                    <h2 class="card-pf-title" style="margin: 16px 0;">
                        Excluded packages
                    </h2>
                </div>

                <div class="card-pf-body" 
                     *ngIf="value?.excludePackages?.length > 0"
                     [ngClass]="{'pre-scrollable': excludePackageViewSelection == 1}"
                     [ngStyle]="{'padding-top': excludePackageViewSelection == 0 ? '0px' : '10px'}"
                     style="height: 184px;">
                    <select *ngIf="excludePackageViewSelection == 0"
                            class="form-control"
                            multiple
                            size="10"
                            style="border: 0; box-shadow: none;">
                        <option *ngFor="let item of value?.excludePackages" style="padding-left:25px;">
                            {{item.fullName}}
                        </option>
                    </select>

                    <mat-tree #excludedPackageMatTree *ngIf="excludePackageViewSelection == 1" [dataSource]="dataSourceExcluded" [treeControl]="treeControlExcluded">
                        <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
                            <button type="button" mat-icon-button disabled></button>
                            <i class="fa fa-folder"></i>&nbsp;{{node.name}}
                        </mat-tree-node>
                        <mat-tree-node *matTreeNodeDef="let node;when: hasChild" matTreeNodePadding>
                            <button type="button" mat-icon-button matTreeNodeToggle [attr.aria-label]="'toggle ' + node.name">
                                <mat-icon class="mat-icon-rtl-mirror">
                                    {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                                </mat-icon>
                            </button>
                            <i class="fa fa-folder"></i>&nbsp;{{node.name}}
                        </mat-tree-node>
                    </mat-tree>
                </div>
                <div class="card-pf-body"
                     *ngIf="value?.excludePackages?.length <= 0"
                     style="height: 184px; padding-top: 0;">
                    <div class="blank-slate-pf" 
                         style="background-color: transparent; border: transparent; padding: 35px 120px;">
                        <div class="blank-slate-pf-icon">
                            <span class="pficon pficon pficon-info"></span>
                        </div>
                        <h1>
                            No packages excluded
                        </h1>
                    </div>
                </div>
                <div class="card-pf-footer" style="padding: 15px 30px 10px;">
                    <p>
                        These packages won't be part of the analysis
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>